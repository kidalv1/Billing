@model DTO.Models.Invoice

@{
    ViewBag.Title = "Delete invoice";
}

<h2>Delete</h2>

<h3>Are you sure you want to delete this?</h3>
<div>
  <h4>Invoice</h4>
  <hr />
  <dl class="dl-horizontal">
    <dt>
      @Html.DisplayNameFor(model => model.Date)
    </dt>

    <dd>
      @Html.DisplayFor(model => model.Date)
    </dd>

    <dt>
      @Html.DisplayNameFor(model => model.Active)
    </dt>

    <dd>
      @Html.DisplayFor(model => model.Active)
    </dd>

    <dt>
      @Html.DisplayNameFor(model => model.Reason)
    </dt>

    <dd>
      @Html.DisplayFor(model => model.Reason)
    </dd>

    <dt>
      @Html.DisplayNameFor(model => model.CustomerId)
    </dt>

    <dd>
      @Html.DisplayFor(model => model.CustomerId)
    </dd>

    <dt>
      @Html.DisplayNameFor(model => model.User)
    </dt>

    <dd>
      @Html.DisplayFor(model => model.User)
    </dd>

    <dt>
      @Html.DisplayNameFor(model => model.InvoiceCode)
    </dt>

    <dd>
      @Html.DisplayFor(model => model.InvoiceCode)
    </dd>

  </dl>
  <table class="table">
    <tr>
      <th>
        Item
      </th>
      <th>
        PricePiece
      </th>
      <th>
        Discount
      </th>
      <th>
        CountOfItems
      </th>
      <th>
        Percentage
      </th>

      <th>
        Price with vat
      </th>
      <th>
        Price without vat
      </th>
      <th></th>
    </tr>

    @foreach (var item in Model.DetailLines)
    {
    <tr>
      <td>
        @Html.DisplayFor(modelItem => item.Item)
      </td>
      <td>
        @Html.DisplayFor(modelItem => item.PricePiece)
      </td>
      <td>
        @Html.DisplayFor(modelItem => item.Discount)
      </td>
      <td>
        @Html.DisplayFor(modelItem => item.CountOfItems)
      </td>


      <td>
        @item.GetVatPercantage()%
      </td>

      <td>
        @ViewBag.priceWithVat
      </td>
      <td>
        @ViewBag.priceWithoutVAT
      </td>
    </tr>
    }
  </table>


  @using (Html.BeginForm())
  {
    @Html.AntiForgeryToken()
    <form>
      <div class="form-actions no-color">
        @if (Model.DetailLines.Count > 0)
        {
        <p>Reasons for deleting: <br /> <textarea id = "reason" name = "reason" value = "" class="reason" required ></textarea></p>
        }
        

        <input type="submit" value="Delete" class="btn btn-secondary btn-sm" /> |
        @Html.ActionLink("Back to List", "Index")
      </div>
    </form>
  }
  <h3>
    <strong> @ViewBag.ex </strong>
  </h3>
</div>
