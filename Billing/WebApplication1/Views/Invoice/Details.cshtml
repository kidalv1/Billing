@model DTO.Models.Invoice

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<div>
    <h4>Invoice</h4>
    <hr />
    <dl class="dl-horizontal">

      <dt>
        @Html.DisplayNameFor(model => model.Date)
      </dt>

      <dd>
        @Model.Date.ToShortDateString()
      </dd>
      <dt>
        @Html.DisplayNameFor(model => model.Finished)
      </dt>
      <dd>
        @Html.DisplayFor(model => model.Finished)
      </dd>
      <dt>
        @Html.DisplayNameFor(model => model.CustomerId)
      </dt>

      <dd>
        @Html.DisplayFor(model => model.CustomerId)
      </dd>

      <dt>
        @Html.DisplayNameFor(model => model.User)
      </dt>

      <dd>
        @Html.DisplayFor(model => model.User)
      </dd>

      <dt>
        @Html.DisplayNameFor(model => model.InvoiceCode)
      </dt>

      <dd>
        @Html.DisplayFor(model => model.InvoiceCode)
      </dd>
      <table class="table">
        <tr>
          <th>
            Item
          </th>
          <th>
            PricePiece
          </th>
          <th>
            Discount
          </th>
          <th>
            CountOfItems
          </th>
          <th>
            Percentage
          </th>

          <th>
            Price
          </th>
          <th></th>
        </tr>

        @foreach (var item in Model.DetailLines)
        {
          <tr>
            <td>
              @Html.DisplayFor(modelItem => item.Item)
            </td>
            <td>
              @Html.DisplayFor(modelItem => item.PricePiece)
            </td>
            <td>
              @Html.DisplayFor(modelItem => item.Discount)
            </td>
            <td>
              @Html.DisplayFor(modelItem => item.CountOfItems)
            </td>

            <td>
              @item.GetVatPercantage()%
            </td>
            <td>
              @item.GetTotalPrice()
            </td>

          </tr>
        }
      </table>
      <p>
        @Html.ActionLink("Edit", "Edit", new { id = Model.Id }) |
        @Html.ActionLink("Back to List", "Index")
      </p>
      <h3>
        <strong style="float:right">Total price without VAT: @ViewBag.priceWithoutVAT </strong>
      </h3>
      <br />

      <h3>
        <strong style="float:right">Total price with VAT: @ViewBag.priceWithVat </strong>
      </h3>

    </dl>
</div>
